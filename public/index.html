<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Survive.io</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.10.1/nipplejs.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; touch-action: none; color: white; }
        canvas { display: block; }
        
        /* Gelişmiş Menü Tasarımları */
        #menu-overlay, #death-overlay, #global-modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center; z-index: 100;
            transition: all 0.3s ease;
        }
        
        .box { 
            background: rgba(30, 30, 30, 0.6); 
            padding: 40px; border-radius: 24px; text-align: center; 
            border: 1px solid rgba(255,255,255,0.1); 
            width: 90%; max-width: 400px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h1 { font-size: 42px; font-weight: 800; letter-spacing: -1px; margin-bottom: 25px; }
        
        input { 
            padding: 15px; width: 85%; border-radius: 12px; border: 1px solid #444; 
            font-size: 18px; margin-bottom: 20px; text-align: center; 
            background: rgba(0,0,0,0.3); color: white; outline: none;
            transition: border 0.3s;
        }
        input:focus { border-color: #4CAF50; }

        button { 
            padding: 14px 28px; font-size: 18px; cursor: pointer; 
            background: #4CAF50; color: white; border: none; border-radius: 12px; 
            font-weight: bold; margin: 8px; transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        button:hover { transform: scale(1.05); filter: brightness(1.1); }
        button:active { transform: scale(0.95); }

        #ping-display {
            position: fixed; top: 15px; right: 160px; font-size: 14px; font-weight: bold;
            color: #00ff00; text-shadow: 1px 1px 2px black; z-index: 90;
        }

        #leaderboard { 
            position: fixed; top: 15px; right: 15px; background: rgba(0,0,0,0.4); 
            backdrop-filter: blur(4px); padding: 12px; border-radius: 12px; 
            width: 140px; font-size: 13px; z-index: 10; border: 1px solid rgba(255,255,255,0.1); 
        }
        .lb-item { display: flex; justify-content: space-between; margin-bottom: 4px; }
        .lb-own { color: #ffeb3b; font-weight: bold; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 8px; padding-top: 8px; }

        #minimap { 
            position: fixed; bottom: 15px; right: 15px; width: 130px; height: 130px; 
            background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2); 
            border-radius: 12px; z-index: 10; overflow: hidden;
        }

        #death-overlay h1 { color: #ff4444; }
        #final-score { font-size: 24px; margin: 20px 0; font-weight: bold; }
        
        .tab-btn { background: #333; font-size: 11px; padding: 6px 12px; color: white; border: none; border-radius: 6px; }
        .tab-btn.active { background: #ff9800; }
    </style>
</head>
<body oncontextmenu="return false;">
    <div id="ping-display">Ping: -- ms</div>
    <div id="menu-overlay">
        <div class="box">
            <h1 style="color: #4CAF50;">Survive.io</h1>
            <input type="text" id="username" placeholder="İsminiz..." maxlength="10">
            <div style="font-size:14px; margin-bottom:15px; opacity: 0.8;">Kontrol: 
                <select id="control-type" style="padding:4px; border-radius:4px; background:#333; color:white; border:none;">
                    <option value="auto">Otomatik</option>
                    <option value="mouse">Mouse</option>
                    <option value="joystick">Joystick</option>
                </select>
            </div>
            <button id="btn-play" style="width:100%">OYNA</button>
            <button onclick="document.getElementById('global-modal').style.display='flex'" style="background:#ff9800; width:100%; margin-top:8px;">REKORLAR</button>
        </div>
    </div>
    <div id="death-overlay" style="display:none;">
        <div class="box">
            <h1>ÖLDÜN!</h1>
            <div id="final-score">Skor: 0</div>
            <button onclick="location.reload()" style="width:100%">TEKRAR DENE</button>
        </div>
    </div>
    <div id="global-modal" style="display:none;">
        <div class="box">
            <h3 style="margin-top:0">GLOBAL REKORLAR</h3>
            <div style="display:flex; justify-content:center; gap:5px; margin-bottom:15px;">
                <button class="tab-btn active" onclick="changeTab('daily', this)">GÜNLÜK</button>
                <button class="tab-btn" onclick="changeTab('monthly', this)">AYLIK</button>
                <button class="tab-btn" onclick="changeTab('allTime', this)">TÜMÜ</button>
            </div>
            <div id="global-list" style="text-align:left; max-height:200px; overflow-y:auto; font-size:14px;"></div>
            <button onclick="document.getElementById('global-modal').style.display='none'" style="background:#555; margin-top:15px; width:100%">KAPAT</button>
        </div>
    </div>
    <div id="leaderboard" style="display:none;"><div id="lb-list"></div><div id="lb-player" class="lb-own"></div></div>
    <div id="minimap" style="display:none;"><canvas id="minimap-canvas" width="130" height="130"></canvas></div>
    <div id="joystick-zone" style="position:fixed; bottom:30px; left:30px; width:120px; height:120px; z-index:50; display:none;"></div>
    <canvas id="gameCanvas"></canvas>
    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
